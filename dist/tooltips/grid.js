/*!
 * 
 * @description FundCharts Tooltips.
 * @version 0.9.9
 * @author Wayne(michealwayne@163.com)
 * @time 2018~2021
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var o in i)("object"==typeof exports?exports:t)[o]=i[o]}}(window,(function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="undefined"!=typeof wx&&void 0!==wx.getSystemInfoSync;e.default={isWeapp:o,dpr:(o?wx.getSystemInfoSync().pixelRatio:window.devicePixelRatio)||1,circularAngle:2*Math.PI,width:70,height:20,font:"10px Arial",pieFont:"bold 22px Arial",labelFont:"bold 12px Arial",textAlign:"center",colors:{color:"#fff",backgroundColor:"#bdbdbd",valColor:"#eee"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawPoint=e.drawTriangle=e.handleArguments=e.handleWeappDraw=e.getLimitedVal=e.handleShowValTipsStr=e.isString=e.isFunction=e.isUndefined=e.half=e.emptyFunc=void 0;var o=i(0),r=o.default.isWeapp,n=o.default.circularAngle;function a(t){return void 0===t}function l(t){return"function"==typeof t}function d(t){return"string"==typeof t}e.emptyFunc=function(){return""},e.half=function(t){return~~(t/2)},e.isUndefined=a,e.isFunction=l,e.isString=d,e.handleShowValTipsStr=function(t,e,i){return l(t)?t(e):d(t)?t:a(i)?e:i},e.getLimitedVal=function(t,e,i){return t<e?e:t>i?i:t},e.handleWeappDraw=r?function(t){return l(t.draw)&&t.draw(!0)}:e.emptyFunc,e.handleArguments=function(t){return function(e,i,o,r,n){if(!this.ctx)throw Error("canvas `ctx` is not find. Please check `this` point.(FundChartsToolTip)");t.call(this,{xData:o,yDatas:i,xPos:r,yPos:n,index:e})}},e.drawTriangle=function(t,e){return 3===(null==e?void 0:e.length)&&(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[2].x,e[2].y),t.closePath(),t.fill(),!0)},e.drawPoint=function(t){var e=t.ctx,i=t.x,o=t.y,r=t.color,l=t.strokeColor,d=t.width,f=t.strokeWidth;e.beginPath(),e.lineWidth=0,e.strokeStyle=l||"#fff",e.lineWidth=a(f)?1:f,e.arc(i,o,d,0,n,!0),e.closePath(),e.fillStyle=r,e.fill(),f&&e.stroke()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KlineToolTip=e.ArrowToolTip=e.BasicToolTip=void 0;var o=i(1),r=i(0),n=r.default.colors;e.BasicToolTip=o.handleArguments((function(t){var e=t.xData,i=t.yDatas,a=t.xPos,l=this.ctx,d=this.opts,f=d.toolTip||{},c=f.width,h=void 0===c?r.default.width:c,u=f.height,s=void 0===u?r.default.height:u,p=f.font,v=void 0===p?r.default.font:p,g=f.color,x=void 0===g?n.color:g,y=f.textAlign,w=void 0===y?r.default.textAlign:y,b=f.backgroundColor,T=void 0===b?n.backgroundColor:b,m=f.showTip;l.save(),l.beginPath(),l.fillStyle=T;var P=a-o.half(h),S=this._chart.width-d.chartRight-h;P=o.getLimitedVal(P,d.chartLeft,S),l.fillRect(P,d.chartTop+5,h,s),l.fillStyle=x,l.font=v,l.textAlign=w;var A=o.isFunction(m)&&m(e,i)||m||e+":"+i.map((function(t){return t.toFixed(2)})).join(",");l.fillText(A,P+o.half(h),d.chartTop+15),l.closePath(),l.stroke(),l.restore(),o.handleWeappDraw(l)})),e.ArrowToolTip=o.handleArguments((function(t){var e=t.xData,i=t.yDatas,a=t.xPos,l=t.index,d=this.ctx,f=this.opts,c=f.toolTip||{},h=c.width,u=void 0===h?r.default.width:h,s=c.height,p=void 0===s?r.default.height:s,v=c.font,g=void 0===v?r.default.font:v,x=c.color,y=void 0===x?n.color:x,w=c.textAlign,b=void 0===w?r.default.textAlign:w,T=c.backgroundColor,m=void 0===T?n.backgroundColor:T,P=c.top,S=void 0===P?12:P,A=c.showTip;d.save(),d.beginPath();var k=this._chart,j=this.datasets,_=this.barWidth;d.strokeStyle=m,d.fillStyle=m;var F=a-o.half(u),W=k.width-f.chartRight-u;F=o.getLimitedVal(F,f.chartLeft,W);var M=j[0][l].x,D=j[0][l].y;_&&(M+=o.half(this.barWidth),D=Math.min.apply(null,j.map((function(t){return t[l].y}))));var L=D+(this.drawer.zeroY&&D>this.drawer.zeroY?S:-(p+S)),C=!0;L<f.chartTop&&(C=!1,L=f.chartTop);var O=L+p;_&&this.drawer.zeroY&&L>this.drawer.zeroY&&(O=L),L+p>k.height-25&&(C=!1,L=k.height-25-p),d.fillRect(F,L,u,p),C&&o.drawTriangle(d,[{x:Math.max(M-3,F),y:O},{x:Math.min(M+3,F+u),y:O},{x:M,y:O+5*(O>L?1:-1)}]),d.fillStyle=y,d.font=g,d.textAlign=b;var R=o.isFunction(A)&&A(e,i)||A||e+":"+i.map((function(t){return t.toFixed(2)})).join(",");d.fillText(R,F+o.half(u),L+10),d.closePath(),d.stroke(),d.restore(),o.handleWeappDraw(d)})),e.KlineToolTip=o.handleArguments((function(t){var e=t.xData,i=t.xPos,a=t.yPos;i=Math.abs(i),a=Math.abs(a);var l=this.ctx,d=this.opts,f=d.toolTip||{},c=f.xWidth,h=void 0===c?r.default.width:c,u=f.xHeight,s=void 0===u?15:u,p=f.yWidth,v=void 0===p?40:p,g=f.yHeight,x=void 0===g?15:g,y=f.font,w=void 0===y?r.default.font:y,b=f.color,T=void 0===b?n.color:b,m=f.textAlign,P=void 0===m?r.default.textAlign:m,S=f.backgroundColor,A=void 0===S?n.backgroundColor:S,k=f.showTip,j=f.showValTip;l.save(),l.beginPath();var _=this._chart;l.strokeStyle=A,l.fillStyle=A;var F=i-o.half(h),W=o.half(x),M=_.width-d.chartRight-h,D=_.height-40;F=o.getLimitedVal(F,d.chartLeft,M),W=o.getLimitedVal(F,d.chartTop,D),l.fillRect(F,D,h,s),l.fillRect(d.chartLeft,W,v,x),l.fillStyle=T,l.font=w,l.textAlign=P,l.fillText(o.isFunction(k)&&k(e)||k||e,F+o.half(h),D+8);var L=((a-this.drawer.yBasic)/this.drawer.yRate).toFixed(2);l.fillText(o.handleShowValTipsStr(j,L),d.chartLeft+o.half(v),W+8),l.closePath(),l.stroke(),l.restore(),o.handleWeappDraw(l)}))}])}));