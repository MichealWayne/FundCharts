/*!
 * FundCharts@description: web/weapp/nodejs canvas lite charts library.
 * @version: 1.0.0
 * @author: Wayne
 * @time: 2018~2025
 */
var t="undefined"!=typeof wx&&void 0!==wx.getSystemInfoSync,o={isWeapp:t,dpr:t?wx.getSystemInfoSync().pixelRatio||1:window.devicePixelRatio||1,circularAngle:2*Math.PI,width:70,height:20,font:"10px Arial",pieFont:"bold 22px Arial",labelFont:"bold 12px Arial",textAlign:"center",colors:{color:"#fff",backgroundColor:"#bdbdbd",valColor:"#eee"}},i=o.circularAngle;function e(t){return~~(t/2)}function l(t){return void 0===t}function r(t){return"function"==typeof t}function a(t,o,i){return"function"==typeof t?t(o):"string"==typeof t?t:l(i)?o:i}function n(t,o,i){return t<o?o:t>i?i:t}var h=o.isWeapp?function(t){r(t.draw)&&t.draw(!0)}:function(){return""};function s(t){return function(o,i,e,l,r){if(!this.ctx)throw new Error("canvas `ctx` is not found. Please check `this` point.(FundChartsToolTip)");t.call(this,{xData:e,yDatas:i,xPos:l,yPos:r,index:o})}}function c(t){var o=t.ctx,e=t.x,r=t.y,a=t.color,n=t.strokeColor,h=t.width,s=t.strokeWidth;o.beginPath(),o.lineWidth=0,o.strokeStyle=n||"#fff",o.lineWidth=l(s)?1:s,o.arc(e,r,h,0,i,!0),o.closePath(),o.fillStyle=a,o.fill(),s&&o.stroke()}var d=o.colors,f=s((function(t){var i=t.xData,l=t.yDatas,a=t.xPos,s=this.ctx,c=this.opts,f=c.toolTip||{},x=f.width,v=void 0===x?o.width:x,y=f.height,p=void 0===y?o.height:y,g=f.font,T=void 0===g?o.font:g,u=f.color,w=void 0===u?d.color:u,b=f.textAlign,S=void 0===b?o.textAlign:b,k=f.backgroundColor,A=void 0===k?d.backgroundColor:k,P=f.showTip;s.save(),s.beginPath(),s.fillStyle=A;var C=a-e(v),R=this._chart.width-c.chartRight-v;C=n(C,c.chartLeft,R),s.fillRect(C,c.chartTop+5,v,p),s.fillStyle=w,s.font=T,s.textAlign=S;var m=r(P)&&P(i,l)||P||i+":"+l.map((function(t){return t.toFixed(2)})).join(",");s.fillText(m,C+e(v),c.chartTop+15),s.closePath(),s.stroke(),s.restore(),h(s)})),x=s((function(t){var i=t.xData,l=t.yDatas,a=t.xPos,s=t.index,c=this.ctx,f=this.opts,x=f.toolTip||{},v=x.width,y=void 0===v?o.width:v,p=x.height,g=void 0===p?o.height:p,T=x.font,u=void 0===T?o.font:T,w=x.color,b=void 0===w?d.color:w,S=x.textAlign,k=void 0===S?o.textAlign:S,A=x.backgroundColor,P=void 0===A?d.backgroundColor:A,C=x.top,R=void 0===C?12:C,m=x.showTip;c.save(),c.beginPath();var F=this._chart,W=this.datasets,D=this.barWidth;c.strokeStyle=P,c.fillStyle=P;var L=a-e(y),M=F.width-f.chartRight-y;L=n(L,f.chartLeft,M);var Y=W[0][s].x,_=W[0][s].y;D&&(Y+=e(this.barWidth),_=Math.min.apply(null,W.map((function(t){return t[s].y}))));var z=_+(this.drawer.zeroY&&_>this.drawer.zeroY?R:-(g+R)),V=!0;z<f.chartTop&&(V=!1,z=f.chartTop);var B=z+g;D&&this.drawer.zeroY&&z>this.drawer.zeroY&&(B=z),z+g>F.height-25&&(V=!1,z=F.height-25-g),c.fillRect(L,z,y,g),V&&function(t,o){3===(null==o?void 0:o.length)&&(t.beginPath(),t.moveTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y),t.lineTo(o[2].x,o[2].y),t.closePath(),t.fill())}(c,[{x:Math.max(Y-3,L),y:B},{x:Math.min(Y+3,L+y),y:B},{x:Y,y:B+5*(B>z?1:-1)}]),c.fillStyle=b,c.font=u,c.textAlign=k;var E=r(m)&&m(i,l)||m||i+":"+l.map((function(t){return t.toFixed(2)})).join(",");c.fillText(E,L+e(y),z+10),c.closePath(),c.stroke(),c.restore(),h(c)})),v=s((function(t){var i=t.xData,l=t.xPos,s=t.yPos;l=Math.abs(l),s=Math.abs(s);var c=this.ctx,f=this.opts,x=f.toolTip||{},v=x.xWidth,y=void 0===v?o.width:v,p=x.xHeight,g=void 0===p?15:p,T=x.yWidth,u=void 0===T?40:T,w=x.yHeight,b=void 0===w?15:w,S=x.font,k=void 0===S?o.font:S,A=x.color,P=void 0===A?d.color:A,C=x.textAlign,R=void 0===C?o.textAlign:C,m=x.backgroundColor,F=void 0===m?d.backgroundColor:m,W=x.showTip,D=x.showValTip;c.save(),c.beginPath();var L=this._chart;c.strokeStyle=F,c.fillStyle=F;var M=l-e(y),Y=e(b),_=L.width-f.chartRight-y,z=L.height-40;M=n(M,f.chartLeft,_),Y=n(M,f.chartTop,z),c.fillRect(M,z,y,g),c.fillRect(f.chartLeft,Y,u,b),c.fillStyle=P,c.font=k,c.textAlign=R,c.fillText(r(W)&&W(i)||W||i,M+e(y),z+8);var V=((s-this.drawer.yBasic)/this.drawer.yRate).toFixed(2);c.fillText(a(D,V),f.chartLeft+e(u),Y+8),c.closePath(),c.stroke(),c.restore(),h(c)})),y=o.colors,p=s((function(t){var i=t.yDatas,e=t.index,l=this.ctx,a=this.opts,n=(this.drawer||{}).origin,s=a.toolTip||{},c=s.font,d=void 0===c?o.pieFont:c,f=s.color,x=s.valColor,v=void 0===x?y.valColor:x,p=s.textAlign,g=void 0===p?o.textAlign:p,T=s.valY,u=void 0===T?n.y:T,w=s.showTip,b=s.showValTip;l.save(),l.fillStyle=f||a.colors[e],l.font=d,l.textAlign=g;var S=r(w)&&w(e)||w||"";l.fillText(S,n.x,u-10),l.fillStyle=v;var k=r(b)&&b(i[0])||b||(100*i[0]).toFixed(1);l.fillText(k,n.x,u+15),l.restore(),h(l)})),g=s((function(t){var i=t.yDatas,e=t.index,l=this,n=l.ctx,s=l.opts,c=l.drawer,d=s.toolTip||{},f=d.font,x=void 0===f?o.labelFont:f,v=d.color,p=d.valColor,g=void 0===p?y.valColor:p,T=d.textAlign,u=void 0===T?o.textAlign:T,w=d.showTip,b=d.showValTip;n.save();var S=c.origin,k=c.radius,A=c.centerArr,P=Math.sin(A[e])*k,C=Math.cos(A[e])*k;s.widthRates&&(P*=s.widthRates[e]||1,C*=s.widthRates[e]||1);var R=s.chartLeft,m=this._chart.width-R;n.beginPath(),n.moveTo(S.x+C,S.y+P),n.lineTo(S.x+1.2*C,S.y+1.2*P),n.lineTo(C>0?m-20:R+20,S.y+1.2*P),n.strokeStyle=n.fillStyle=s.colors[e],n.lineWidth=1,n.stroke(),n.font=x,n.textAlign=u,n.textBaseline="middle",n.fillStyle=v||s.colors[e];var F=r(w)&&w(e)||w||"";n.fillText(F,C>0?m:R,S.y+1.2*P-10),n.fillStyle=g;var W=a(b,String(i[0]),(100*i[0]).toFixed(2));n.fillText(W,C>0?m:R,S.y+1.2*P+5),n.closePath(),n.restore(),h(n)})),T=s((function(t){var i=t.yDatas,e=t.index,l=this.ctx,n=this.opts,s=n.toolTip||{},d=s.font,f=void 0===d?o.labelFont:d,x=s.color,v=s.valColor,p=void 0===v?y.valColor:v,g=s.valY,T=s.valX,u=s.showTip,w=s.showValTip;l.save();var b=this.side,S=this.drawer.origin,k=this.dataset,A=this._chart.width,P=T;P||(P=S.x>A/2?n.chartLeft+20:A-n.chartRight-70);var C=g||S.y,R={ctx:l,x:P,y:0,color:"",strokeColor:"",width:4,strokeWidth:1};b?k.forEach((function(t,o){R.y=C-4+15*o,R.color=R.strokeColor=n.colors[o],c(R)})):(R.y=C-4,R.color=R.strokeColor=n.colors[e],c(R)),l.font=f;var m=r(u)&&u(e)||u||"";if(b)k.forEach((function(t,o){l.fillStyle=x||n.colors[o],l.fillText(m,P+10,C+15*o);var e=a(w,String(i[0]),(1*i[0]).toFixed(2));l.fillStyle=p,l.fillText(e,P+l.measureText(m).width+15,C+15*o)}));else{l.fillStyle=x||n.colors[e],l.fillText(m,P+10,C);var F=a(w,String(i[0]),(100*i[0]).toFixed(2));l.fillText(F,P+l.measureText(m).width+15,C)}l.restore(),h(l)})),u={BasicToolTip:f,ArrowToolTip:x,KlineToolTip:v,PieCenterToolTip:p,PieLabelToolTip:g,LabelsToolTip:T};export{x as ArrowToolTip,f as BasicToolTip,v as KlineToolTip,T as LabelsToolTip,p as PieCenterToolTip,g as PieLabelToolTip,u as default};
