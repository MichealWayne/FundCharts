/*!
 * FundCharts@description: web/weapp/nodejs canvas lite charts library.
 * @version: 1.0.0
 * @author: Wayne
 * @time: 2018~2025
 */
var t,n,e="development"===("undefined"!=typeof global&&(null===(t=global.process)||void 0===t?void 0:t.env)||"undefined"!=typeof window&&window||{}).NODE_ENV,r="undefined"!=typeof wx&&void 0!==wx.getSystemInfoSync,o="undefined"!=typeof window&&!r,i="undefined"!=typeof process&&!!(null===(n=process.versions)||void 0===n?void 0:n.node);function a(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,u)}c((r=r.apply(t,n||[])).next())}))}function u(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function c(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))}function l(t){return Object.prototype.toString.call(t).replace(/\[object\s|\]/g,"")}function h(t){return"Array"===l(t)}function s(t){return void 0===t}function f(t){return"string"==typeof t}function d(t){return"Object"===l(t)}function v(t){return"function"==typeof t}function p(t){return"number"==typeof t&&!isNaN(t)}function y(t){if(!t)return!1;for(var n in t)return!1;return!0}var x=function(){return""};function w(t,n){for(var e=0,r=t.length;e<r;e++)n(t[e],e);return t}function g(t,n){if(!d(t)||!d(n))return{};for(var e in t)!d(n[e])||y(n[e])?n[e]=n[e]||t[e]:g(t[e],n[e]);return n}var m=function(t,n){return w(t,(function(t,e){n[e]=t})),n};function C(t,n,e){return void 0===n&&(n=""),void 0===e&&(e=""),a(this,void 0,void 0,(function(){return u(this,(function(r){throw new Error("Error!".concat(t,".(FundCharts-").concat(n," ").concat(e,")"))}))}))}function b(t){if(!t.length)return{max:0,min:0};for(var n=-1/0,e=1/0,r=0,o=t.length;r<o;r++){var i=t[r];i>n&&(n=i),i<e&&(e=i)}return{max:n,min:e}}function M(t){return t?t>2?4*Math.ceil(t/4):1.2*t:1}function P(t,n){var e=t.x,r=t.y,o=n.x,i=n.y,a=Math.atan2(o-e,r-i);return a<0?2*Math.PI+a:a}function S(t,n){var e=t.x,r=t.y,o=n.x,i=n.y;return Math.sqrt(Math.pow(e-o,2)+Math.pow(r-i,2))}function j(t){var n;return/^#([0-9a-fA-F]{3}){1,2}$/.test(t)&&(null===(n=(4===t.length?t.replace(/([0-9a-fA-F])/g,"$1$1"):t).substring(1).match(/.{2}/g))||void 0===n?void 0:n.map((function(t){return parseInt(t,16)})))||[]}function A(t,n){void 0===n&&(n=1);var e=j(t),r=3===e.length;return"rgba(".concat(r?e.join(","):"0,0,0",",").concat(r?n:0,")")}function O(t){return!!t&&"0)"===t.replace(/\s/g,"").slice(-2)}function E(t,n){return void 0===n&&(n=0),j(t).map((function(t){return Math.min(255,t+Math.round(t*n))}))}var k={width:500,height:500},F={top:0,right:15,bottom:30,left:50},I=600;function $(t,n){var e,r=t.currentStyle?t.currentStyle[n]:null===(e=document.defaultView)||void 0===e?void 0:e.getComputedStyle(t,null).getPropertyValue(n),o=null==r?void 0:r.match(/^(\d+)(\.\d+)?px$/);return o?+o[1]:0}function q(t,n){var e=n.id,r=n.width,o=n.height,i=document.createElement("canvas");return i.id="".concat(e,"Canvas"),i.width=r||$(t,"width")||k.width,i.height=o||$(t,"height")||k.height,t.appendChild(i),i}function T(t,n,e){var r=n.x,o=n.y,i=e.x,a=e.y;t.beginPath(),t.moveTo(r,o),t.lineTo(i,a),t.closePath(),t.stroke()}function z(t,n,e,r){var o=n.x,i=n.y,a=e.x,u=e.y;void 0===r&&(r=5);var c,l,h=~~((c=a-o,l=u-i,Math.sqrt(Math.pow(c,2)+Math.pow(l,2)))/r);t.beginPath();for(var s=0;s<h;s++)t[1&s?"lineTo":"moveTo"](o+(a-o)/h*s,i+(u-i)/h*s);t.closePath(),t.stroke()}function N(t,n,e,r,o,i){var a=n.x,u=n.y;t.beginPath(),t.strokeStyle=r||"#fff",t.lineWidth=p(i)?i:1,t.arc(a,u,o,0,2*Math.PI,!0),t.closePath(),t.fillStyle=e,t.fill(),i&&t.stroke()}function V(t,n,e,r){t.save(),t.translate(n.x,n.y),t.rotate(e*Math.PI/180),t.fillText(String(r),0,0),t.restore()}function W(t,n,e){var r=n.x,o=n.y,i=.1;!function n(e,r,o){var a=o-i,u=Math.sqrt(o*o-a*a),c=e-a,l=r-u,h=2*a,s=2*u;i<=o&&(t.clearRect(c,l,h,s),i+=.1,n(e,r,o))}(r,o,e)}function _(t,n){var e=window.devicePixelRatio||1;if(1===e)return e;var r=t.width,o=t.height;return t.width=r*e,t.height=o*e,n.scale(e,e),t.style.width="".concat(r,"px"),t.style.height="".concat(o,"px"),e}function D(t){(!t||o?t.$el:(null==t?void 0:t.opts.Canvas)||r)||C("no chart object to set context","setEnvContext");var n,e=t.opts,i=e.width||k.width,a=e.height||k.height;if(o){var u=t.$el;u.style.webkitUserSelect="none",u.style.userSelect="none",n=v(u.getContext)?u:q(u,{id:e.id,width:e.width||$(u,"width"),height:e.height||$(u,"height")})}else if(r){var c="undefined"==typeof wx?null:wx;v(null==c?void 0:c.createCanvasContext)||C("no param {Object} Ctx","setEnvContext");var l=c.createCanvasContext(e.id);n={info:"Weapp native canvas",width:i,height:a,getContext:function(){return l},draw:function(n){n?l.draw(!0):c.drawCanvas({canvasId:e.id,actions:t.ctx.getActions()})}}}else{var h=e.Canvas;e.Canvas||C("no param {Object} Canvas","setEnvContext"),n=h.createCanvas(i,a),e.handleOut&&e.handleOut(n)}t.canvas=n,t.ctx=n.getContext("2d"),t._chart={width:n.width,height:n.height}}var R=function t(n,e){var r=this;this.x=0,this.y=0,this.length=function(){return Math.sqrt(r.x*r.x+r.y*r.y)},this.normalize=function(){var n=1/r.length();return new t(r.x*n,r.y*n)},this.add=function(n){return new t(r.x+n.x,r.y+n.y)},this.multiply=function(n){return new t(r.x*n,r.y*n)},this.dot=function(t){return r.x*t.x+r.y*t.y},this.angle=function(t){return 180*Math.acos(r.dot(t)/(r.length()*t.length()))/Math.PI},this.x=n,this.y=e};function U(t){for(var n=.3,e=t.length-2,r=[],o=0;o<e;o++){var i=t[o],a=t[o+1],u=t[o+2],c=new R(i.x-a.x,i.y-a.y),l=new R(u.x-a.x,u.y-a.y),h=c.length(),s=l.length(),f=c.normalize().add(l.normalize()).normalize(),d=new R(f.y,-1*f.x),v=new R(-1*f.y,f.x);if(d.angle(c)<90){var p=d.multiply(h*n).add(a),y=v.multiply(s*n).add(a);r.push(p,y)}else{p=d.multiply(s*n).add(a),y=v.multiply(h*n).add(a);r.push(y,p)}}return r}var G=function(){return"undefined"!=typeof requestAnimationFrame?(G=function(){return requestAnimationFrame},requestAnimationFrame):function(t,n){setTimeout((function(){t(+new Date)}),n)}};function B(t){var n=t.duration||600,e=t.onProcess||x,r=t.onAnimationFinish||x,o=G(),i=null;o((function t(a){if(null===a)return e(1),r(),!1;if(null===i&&(i=a),a-i<n){var u=(a-i)/n;c=u,u=(c/=.5)<1?.5*Math.pow(c,3):.5*(Math.pow(c-2,3)+2),e(u),o(t,23)}else e(1),r();var c;return!0}),23)}function H(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){Object.assign.apply(Object,c([n.prototype],t,!1))}}function J(t){t.prototype.setAnimation=function(t){var n=this.chartjs.opts;B({duration:n.duration,onProcess:t,onAnimationFinish:n.onFinish})}}function K(t,n,e){(!t||o?t.$el:t.opts.Canvas||r)||C("no chart object to set context","setEnvContext");var i,a=t.opts,u=a.width||500,c=a.height||500;if(o){var l=t.$el;l.style.webkitUserSelect="none",l.style.userSelect="none",i=v(l.getContext)?l:q(l,a)}else if(r){var h="undefined"==typeof wx?null:wx;v(null==h?void 0:h.createCanvasContext)||C("no param {Object} Ctx","setEnvContext");var s=h.createCanvasContext(a.id);i={info:"Weapp native canvas",width:u,height:c,getContext:function(){return s},draw:function(n){if(n)return s.draw(!0);h.drawCanvas({canvasId:a.id,actions:t.ctx.getActions()})}}}else{var f=a.Canvas;a.Canvas||C("no param {Object} Canvas","setEnvContext"),i=f.createCanvas(u,c),a.handleOut&&a.handleOut(i)}return t.canvas=i,t.ctx=i.getContext("2d"),t._chart={width:i.width,height:i.height},e}export{I as DEFAULT_ANIMATION_TIME,k as DEFAULT_CANVAS_SIZE,F as DEFAULT_GRID_CHART_PADDING,x as NOOP,e as __DEV__,K as addEnvContext,B as animate,q as appendCanvasElem,W as clearArc,m as cloneArray,g as cloneObjDeep,z as drawDashLine,T as drawLine,N as drawPoint,V as drawRotateText,w as each,M as getAxisLimit,j as getColorRgbList,A as getColorRgba,U as getCurvePoints,$ as getElementSize,E as getLightfulRgbList,b as getListExtremum,P as getPointsAngle,S as getPointsDistance,h as isArray,y as isEmptyObj,v as isFunction,i as isNode,p as isNumber,d as isObject,f as isString,O as isTransparentColor,s as isUndefined,r as isWeapp,o as isWeb,H as mixins,_ as retinaScale,J as setAnimationHooks,D as setEnvContext,C as throwError,l as type};
