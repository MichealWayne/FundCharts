/*!
 * 
 * @description: FundCharts Tooltips.
 * @version: 0.9.8
 * @author: Micheal Wayne(michealwayne@163.com)
 * @time: 2018~2021
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FundChartsToolTips=e():t.FundChartsToolTips=e()}(window,(function(){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var l=e[i]={i:i,l:!1,exports:{}};return t[i].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)o.d(i,l,function(e){return t[e]}.bind(null,l));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=2)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="undefined"!=typeof wx&&void 0!==wx.getSystemInfoSync;e.default={isWeapp:i,dpr:(i?wx.getSystemInfoSync().pixelRatio:window.devicePixelRatio)||1,width:70,height:20,font:"10px Arial",pieFont:"bold 22px Arial",labelFont:"bold 12px Arial",textAlign:"center",colors:{color:"#fff",backgroundColor:"#bdbdbd",valColor:"#eee"}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawPoint=e.drawTriangle=e.handleArguments=e.handleWeappDraw=e.isFunction=e.half=e.emptyFunc=void 0;var i=o(0).default.isWeapp;function l(t){return"function"==typeof t}e.emptyFunc=function(){return""},e.half=function(t){return~~(t/2)},e.isFunction=l,e.handleWeappDraw=i?function(t){return l(t.draw)&&t.draw(!0)}:e.emptyFunc,e.handleArguments=function(t){return function(e,o,i,l,r){t.call(this,{xData:i,yDatas:o,xPos:l,yPos:r,index:e})}},e.drawTriangle=function(t,e){return!(!e||3!==e.length)&&(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[2].x,e[2].y),t.closePath(),t.fill(),!0)},e.drawPoint=function(t,e,o,i,l,r,a){t.beginPath(),t.lineWidth=0,t.strokeStyle="#fff",t.lineWidth=void 0!==a?a:1,t.arc(e,o,r,0,2*Math.PI,!0),t.closePath(),t.fillStyle=i,t.fill(),a&&t.stroke()}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),l=o(4);t.exports={BasicToolTip:i.BasicToolTip,ArrowToolTip:i.ArrowToolTip,KlineToolTip:i.KlineToolTip,PieCenterToolTip:l.PieCenterToolTip,PieLabelToolTip:l.PieLabelToolTip,LabelsToolTip:l.LabelsToolTip}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KlineToolTip=e.ArrowToolTip=e.BasicToolTip=void 0;var i=o(1),l=o(0),r=l.default.colors;e.BasicToolTip=i.handleArguments((function(t){var e=t.xData,o=t.yDatas,a=t.xPos,n=this.ctx,s=this.opts,d=s.toolTip||{},h=d.width,f=void 0===h?l.default.width:h,c=d.height,u=void 0===c?l.default.height:c,p=d.font,v=void 0===p?l.default.font:p,T=d.color,x=void 0===T?r.color:T,y=d.textAlign,g=void 0===y?l.default.textAlign:y,w=d.backgroundColor,b=void 0===w?r.backgroundColor:w,P=d.showTip;n.save(),n.beginPath(),n.fillStyle=b;var m=a-i.half(f),A=this._chart.width-s.chartRight-f;m=m<s.chartLeft?s.chartLeft:m>A?A:m,n.fillRect(m,s.chartTop+5,f,u),n.fillStyle=x,n.font=v,n.textAlign=g;var F=i.isFunction(P)&&P(e,o)||P||e+":"+o.map((function(t){return t.toFixed(2)})).join(",");n.fillText(F,m+i.half(f),s.chartTop+15),n.closePath(),n.stroke(),n.restore(),i.handleWeappDraw(n)})),e.ArrowToolTip=i.handleArguments((function(t){var e=t.xData,o=t.yDatas,a=t.xPos,n=t.index,s=this.ctx,d=this.opts,h=d.toolTip||{},f=h.width,c=void 0===f?l.default.width:f,u=h.height,p=void 0===u?l.default.height:u,v=h.font,T=void 0===v?l.default.font:v,x=h.color,y=void 0===x?r.color:x,g=h.textAlign,w=void 0===g?l.default.textAlign:g,b=h.backgroundColor,P=void 0===b?r.backgroundColor:b,m=h.top,A=void 0===m?12:m,F=h.showTip;s.save(),s.beginPath();var S=this._chart,_=this.datasets,C=this.barWidth;s.strokeStyle=P,s.fillStyle=P;var D=a-i.half(c),L=S.width-d.chartRight-c;D=D<d.chartLeft?d.chartLeft:D>L?L:D;var j=_[0][n].x,M=_[0][n].y;C&&(j+=i.half(this.barWidth),M=Math.min.apply(null,_.map((function(t){return t[n].y}))));var W=M+(this.drawer.zeroY&&M>this.drawer.zeroY?A:-(p+A)),k=!0;W<d.chartTop&&(k=!1,W=d.chartTop);var R=W+p;C&&this.drawer.zeroY&&W>this.drawer.zeroY&&(R=W),W+p>S.height-25&&(k=!1,W=S.height-25-p),s.fillRect(D,W,c,p),k&&i.drawTriangle(s,[{x:Math.max(j-3,D),y:R},{x:Math.min(j+3,D+c),y:R},{x:j,y:R+5*(R>W?1:-1)}]),s.fillStyle=y,s.font=T,s.textAlign=w;var O=i.isFunction(F)&&F(e,o)||F||e+":"+o.map((function(t){return t.toFixed(2)})).join(",");s.fillText(O,D+i.half(c),W+10),s.closePath(),s.stroke(),s.restore(),i.handleWeappDraw(s)})),e.KlineToolTip=i.handleArguments((function(t){var e=t.xData,o=t.xPos,a=t.yPos;o=Math.abs(o),a=Math.abs(a);var n=this.ctx,s=this.opts,d=s.toolTip||{},h=d.xWidth,f=void 0===h?l.default.width:h,c=d.xHeight,u=void 0===c?15:c,p=d.yWidth,v=void 0===p?40:p,T=d.yHeight,x=void 0===T?15:T,y=d.font,g=void 0===y?l.default.font:y,w=d.color,b=void 0===w?r.color:w,P=d.textAlign,m=void 0===P?l.default.textAlign:P,A=d.backgroundColor,F=void 0===A?r.backgroundColor:A,S=d.showTip,_=d.showValTip;n.save(),n.beginPath();var C=this._chart;n.strokeStyle=F,n.fillStyle=F;var D=o-i.half(f),L=a-i.half(x),j=C.width-s.chartRight-f,M=C.height-40;D=D<s.chartLeft?s.chartLeft:D>j?j:D,L=L<s.chartTop?s.chartTop:L>M?M:L,n.fillRect(D,M,f,u),n.fillRect(s.chartLeft,L,v,x),n.fillStyle=b,n.font=g,n.textAlign=m,n.fillText(i.isFunction(S)&&S(e)||S||e,D+i.half(f),M+8);var W=((a-this.drawer.yBasic)/this.drawer.yRate).toFixed(2);n.fillText(i.isFunction(_)&&_(W)||_||W,s.chartLeft+i.half(v),L+8),n.closePath(),n.stroke(),n.restore(),i.handleWeappDraw(n)}))},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelsToolTip=e.PieLabelToolTip=e.PieCenterToolTip=void 0;var i=o(1),l=o(0),r=l.default.colors;e.PieCenterToolTip=i.handleArguments((function(t){var e=t.yDatas,o=t.index,a=this.ctx,n=this.opts,s=this.drawer.origin,d=n.toolTip||{},h=d.font,f=void 0===h?l.default.pieFont:h,c=d.color,u=d.valColor,p=void 0===u?r.valColor:u,v=d.textAlign,T=void 0===v?l.default.textAlign:v,x=d.valY,y=void 0===x?s.y:x,g=d.showTip,w=d.showValTip;a.save(),a.fillStyle=c||n.colors[o],a.font=f,a.textAlign=T;var b=i.isFunction(g)&&g(o)||g||"";a.fillText(b,s.x,y-10),a.fillStyle=p;var P=i.isFunction(w)&&w(e[0])||w||(100*e[0]).toFixed(1);a.fillText(P,s.x,y+15),a.restore(),i.handleWeappDraw(a)})),e.PieLabelToolTip=i.handleArguments((function(t){var e=t.yDatas,o=t.index,a=this.ctx,n=this.opts,s=n.toolTip||{},d=s.font,h=void 0===d?l.default.labelFont:d,f=s.color,c=s.valColor,u=void 0===c?r.valColor:c,p=s.textAlign,v=void 0===p?l.default.textAlign:p,T=s.showTip,x=s.showValTip;a.save();var y=this.drawer,g=y.origin,w=y.radius,b=y.centerArr,P=Math.sin(b[o])*w,m=Math.cos(b[o])*w;n.widthRates&&(P*=n.widthRates[o]||1,m*=n.widthRates[o]||1);var A=n.chartLeft,F=this._chart.width-A;a.beginPath(),a.moveTo(g.x+m,g.y+P),a.lineTo(g.x+1.2*m,g.y+1.2*P),a.lineTo(m>0?F-20:A+20,g.y+1.2*P),a.strokeStyle=a.fillStyle=n.colors[o],a.lineWidth=1,a.stroke(),a.font=h,a.textAlign=v,a.textBaseline="middle",a.fillStyle=f||n.colors[o];var S=i.isFunction(T)&&T(o)||T||"";a.fillText(S,m>0?F:A,g.y+1.2*P-10),a.fillStyle=u;var _=i.isFunction(x)&&x(e[0])||x||(100*e[0]).toFixed(2);a.fillText(_,m>0?F:A,g.y+1.2*P+5),a.closePath(),a.restore(),i.handleWeappDraw(a)})),e.LabelsToolTip=i.handleArguments((function(t){var e=this,o=t.yDatas,a=t.index,n=this.ctx,s=this.opts,d=s.toolTip||{},h=d.font,f=void 0===h?l.default.labelFont:h,c=d.color,u=d.valColor,p=void 0===u?r.valColor:u,v=d.valY,T=d.valX,x=d.showTip,y=d.showValTip;n.save();var g=this.side,w=this.drawer.origin,b=this.dataset,P=T;P||(P=w.x>this._chart.width/2?s.chartLeft+20:this._chart.width-s.chartRight-70);var m=v||w.y;g?b.map((function(t,e){i.drawPoint(n,P,m-4+15*e,s.colors[e],s.colors[e],4,1)})):i.drawPoint(n,P,m-4,s.colors[a],s.colors[a],4,1),n.font=f;var A=i.isFunction(x)&&x(a)||x||"";if(g)b.map((function(t,l){n.fillStyle=c||s.colors[l],n.fillText(A,P+10,m+15*l);var r=i.isFunction(y)&&y(o[0])||y||(o[0]*(e.side?100:1)).toFixed(2);n.fillStyle=p,n.fillText(r,P+n.measureText(A).width+15,m+15*l)}));else{n.fillStyle=c||s.colors[a],n.fillText(A,P+10,m);var F=i.isFunction(y)&&y(o[0])||y||(o[0]*(this.side?100:1)).toFixed(2);n.fillText(F,P+n.measureText(A).width+15,m)}n.restore(),i.handleWeappDraw(n)}))}])}));